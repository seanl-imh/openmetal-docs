<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<title data-react-helmet="true">Guidelines for Searching through OpenStack Logs | Openmetal Docs</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://openmetalio.github.io/openmetal-docs/docs/operators-manual/day-4/troubleshooting/log-filtering"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Guidelines for Searching through OpenStack Logs | Openmetal Docs"><meta data-react-helmet="true" name="description" content="Introduction"><meta data-react-helmet="true" property="og:description" content="Introduction"><link data-react-helmet="true" rel="icon" href="/openmetal-docs/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://openmetalio.github.io/openmetal-docs/docs/operators-manual/day-4/troubleshooting/log-filtering"><link data-react-helmet="true" rel="alternate" href="https://openmetalio.github.io/openmetal-docs/docs/operators-manual/day-4/troubleshooting/log-filtering" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://openmetalio.github.io/openmetal-docs/docs/operators-manual/day-4/troubleshooting/log-filtering" hreflang="x-default"><link rel="stylesheet" href="/openmetal-docs/assets/css/styles.0b4a7092.css">
<link rel="preload" href="/openmetal-docs/assets/js/runtime~main.7dbb6dff.js" as="script">
<link rel="preload" href="/openmetal-docs/assets/js/main.3b3d27ad.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/openmetal-docs/"><div class="navbar__logo"><img src="/openmetal-docs/img/openmetal.svg" alt="Openmetal" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/openmetal-docs/img/openmetal.svg" alt="Openmetal" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title"></b></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/openmetalio/openmetal-docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link hasHref_TwRn" href="/openmetal-docs/docs/users_manual/">User&#x27;s Manual</a><button aria-label="Toggle the collapsible sidebar category &#x27;User&#x27;s Manual&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active hasHref_TwRn" href="/openmetal-docs/docs/operators-manual/">Operator&#x27;s Manual</a><button aria-label="Toggle the collapsible sidebar category &#x27;Operator&#x27;s Manual&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" tabindex="0" href="/openmetal-docs/docs/operators-manual/day-1/command-line/create-ssh-key">Day 1</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" tabindex="0" href="/openmetal-docs/docs/operators-manual/day-2/resource-usage/cloud-resource-usage">Day 2</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" tabindex="0" href="/openmetal-docs/docs/operators-manual/day-3/add-provider-ips">Day 3</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_TwRn" tabindex="0" href="/openmetal-docs/docs/operators-manual/day-4/automation/heat">Day 4</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" tabindex="0" href="/openmetal-docs/docs/operators-manual/day-4/automation/heat">Automation</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link hasHref_TwRn" tabindex="0" href="/openmetal-docs/docs/operators-manual/day-4/kolla-ansible/">Kolla Ansible</a><button aria-label="Toggle the collapsible sidebar category &#x27;Kolla Ansible&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" tabindex="0" href="/openmetal-docs/docs/operators-manual/day-4/security/security-best-practices">Security</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_TwRn" tabindex="0" href="/openmetal-docs/docs/operators-manual/day-4/troubleshooting/ceph">Troubleshooting</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/openmetal-docs/docs/operators-manual/day-4/troubleshooting/ceph">Troubleshooting a Private Cloud&#x27;s Ceph Cluster</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/openmetal-docs/docs/operators-manual/day-4/troubleshooting/log-filtering">Guidelines for Searching through OpenStack Logs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/openmetal-docs/docs/operators-manual/day-4/troubleshooting/rabbitmq">Troubleshooting RabbitMQ</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" tabindex="0" href="/openmetal-docs/docs/operators-manual/day-4/watcher/watcher-demo">Watcher</a></div></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link hasHref_TwRn" href="/openmetal-docs/docs/operators-manual-extras/">Operator&#x27;s Manual Extras</a><button aria-label="Toggle the collapsible sidebar category &#x27;Operator&#x27;s Manual Extras&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/openmetal-docs/docs/how-to-guides/horizon/live-migrate-instance">How to Guides</a></div></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Guidelines for Searching through OpenStack Logs</h1></header><h2 class="anchor anchorWithStickyNavbar_y2LR" id="introduction">Introduction<a class="hash-link" href="#introduction" title="Direct link to heading">​</a></h2><p>OpenMetal private clouds generate a large quantity of log files. It can
be daunting knowing which log and on which host to look in to diagnose
an issue. In this guide, we present strategies for extracting
information from a private cloud&#x27;s log files to determine the root cause
of a failure.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="table-of-contents">Table of Contents<a class="hash-link" href="#table-of-contents" title="Direct link to heading">​</a></h2><ol><li><ul><li><p><a href="/openmetal-docs/docs/operators-manual/day-4/troubleshooting/log-filtering#prerequisites">Prerequisites</a></p><ol><li><a href="/openmetal-docs/docs/operators-manual/day-4/troubleshooting/log-filtering#root-access-to-openstack-control-plane">Root Access to OpenStack Control
Plane</a></li></ol></li></ul></li><li><p><a href="/openmetal-docs/docs/operators-manual/day-4/troubleshooting/log-filtering#elasticsearch-and-kibana">Elasticsearch and
Kibana</a></p></li><li><p><a href="/openmetal-docs/docs/operators-manual/day-4/troubleshooting/log-filtering#kolla-ansible-log-locations">Kolla Ansible Log
Locations</a></p></li><li><p><a href="/openmetal-docs/docs/operators-manual/day-4/troubleshooting/log-filtering#determining-the-correct-log">Determining the Correct
Log</a></p></li><li><p><a href="/openmetal-docs/docs/operators-manual/day-4/troubleshooting/log-filtering#determining-the-correct-host">Determining the Correct
Host</a></p></li><li><p><a href="/openmetal-docs/docs/operators-manual/day-4/troubleshooting/log-filtering#viewing-logs">Viewing
Logs</a></p></li></ol><h2 class="anchor anchorWithStickyNavbar_y2LR" id="prerequisites">Prerequisites<a class="hash-link" href="#prerequisites" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="root-access-to-openstack-control-plane">Root Access to OpenStack Control Plane<a class="hash-link" href="#root-access-to-openstack-control-plane" title="Direct link to heading">​</a></h3><p>Root access to your cloud&#x27;s control plane nodes is required.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="elasticsearch-and-kibana">Elasticsearch and Kibana<a class="hash-link" href="#elasticsearch-and-kibana" title="Direct link to heading">​</a></h2><p>This guide focuses on how to manually look through logs, however
Elasticsearch and Kibana, commonly referred to as an ELK stack, are
often used to aggregate and view logs in a visual manner. With a
properly configured ELK stack, you can view all of your cloud&#x27;s logs
from a single location, visually.</p><p>For more information about enabling an ELK stack in your cloud, see <a href="/openmetal-docs/docs/operators-manual/day-4/kolla-ansible/enable-elk">How
to Enable Elasticsearch and Kibana using Kolla
Ansible</a>.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="kolla-ansible-log-locations">Kolla Ansible Log Locations<a class="hash-link" href="#kolla-ansible-log-locations" title="Direct link to heading">​</a></h2><p>Private Clouds are deployed using Kolla Ansible, an OpenStack deployment
system. This system deploys all OpenStack services into Docker
containers. Each service&#x27;s log file is then stored as
<code>/var/log/kolla/&lt;service-name&gt;</code>, where <code>&lt;service-name&gt;</code> is an OpenStack
service, like Neutron for example.</p><p>For example, to see all logs associated with the Neutron service, <code>ls</code>
the directory <code>/var/log/kolla/neutron</code>:</p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain"># ls /var/log/kolla/neutron/*.log</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/var/log/kolla/neutron/dnsmasq.log</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/var/log/kolla/neutron/neutron-dhcp-agent.log</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/var/log/kolla/neutron/neutron-l3-agent.log</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/var/log/kolla/neutron/neutron-metadata-agent.log</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/var/log/kolla/neutron/neutron-metering-agent.log</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/var/log/kolla/neutron/neutron-netns-cleanup.log</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/var/log/kolla/neutron/neutron-openvswitch-agent.log</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/var/log/kolla/neutron/neutron-server.log</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/var/log/kolla/neutron/privsep-helper.log</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="determining-the-correct-log">Determining the Correct Log<a class="hash-link" href="#determining-the-correct-log" title="Direct link to heading">​</a></h2><p>How do you know which log to look in for an issue? Which host should you
be in? It is generally useful to know which OpenStack services are
running and what their purposes are before determining which log file to
examine to troubleshoot an issue. For a list of OpenStack services and
their purpose, see the <a href="https://www.openstack.org/software/project-navigator/openstack-components#openstack-services" target="_blank" rel="noopener noreferrer">OpenStack
Components</a>
page.</p><p>When diagnosing issues, consider the services associated with the action
that may be failing. For example, if looking into an issue with creating
a volume, consider looking at Cinder&#x27;s various logs.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="determining-the-correct-host">Determining the Correct Host<a class="hash-link" href="#determining-the-correct-host" title="Direct link to heading">​</a></h2><p>By default, your cloud has three control plane nodes. Each of these
nodes has very similar logs, and typically, only one of the nodes is
recording log events for a specific service. Due to this, you may need
to examine all three host&#x27;s logs in real time, replicate the issue, then
see if any of those logs recorded any events.</p><p>To view the logs for all hosts at the same time, consider using a
terminal multiplexer, especially one where you can issue the same
commands in multiple SSH connections. The application <code>tmux</code> is an
example of a terminal multiplexer.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="viewing-logs">Viewing Logs<a class="hash-link" href="#viewing-logs" title="Direct link to heading">​</a></h2><p>There are several native ways to view the contents of a log file.</p><p>Applications like <code>less</code>, <code>nano</code>, and <code>vim</code> will suffice. For more
colorful output, consider using an application like <code>lnav</code>, which has
proven especially useful for examining unfamiliar logs.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/openmetalio/openmetal-docs/blob/main/docs/operators-manual/day-4/troubleshooting/log-filtering.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/openmetal-docs/docs/operators-manual/day-4/troubleshooting/ceph"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Troubleshooting a Private Cloud&#x27;s Ceph Cluster</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/openmetal-docs/docs/operators-manual/day-4/troubleshooting/rabbitmq"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Troubleshooting RabbitMQ</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#table-of-contents" class="table-of-contents__link toc-highlight">Table of Contents</a></li><li><a href="#prerequisites" class="table-of-contents__link toc-highlight">Prerequisites</a><ul><li><a href="#root-access-to-openstack-control-plane" class="table-of-contents__link toc-highlight">Root Access to OpenStack Control Plane</a></li></ul></li><li><a href="#elasticsearch-and-kibana" class="table-of-contents__link toc-highlight">Elasticsearch and Kibana</a></li><li><a href="#kolla-ansible-log-locations" class="table-of-contents__link toc-highlight">Kolla Ansible Log Locations</a></li><li><a href="#determining-the-correct-log" class="table-of-contents__link toc-highlight">Determining the Correct Log</a></li><li><a href="#determining-the-correct-host" class="table-of-contents__link toc-highlight">Determining the Correct Host</a></li><li><a href="#viewing-logs" class="table-of-contents__link toc-highlight">Viewing Logs</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="/openmetal-docs/img/openmetal.svg" alt="Facebook Open Source Logo" class="themedImage_TMUO themedImage--light_4Vu1 footer__logo"><img src="/openmetal-docs/img/openmetal.svg" alt="Facebook Open Source Logo" class="themedImage_TMUO themedImage--dark_uzRr footer__logo"></div><div class="footer__copyright"><strong>2022 © OpenMetal, a division of <a href="https://www.inmotionhosting.com" target="_blank" rel="noopener">InMotion Hosting</a>.  All rights reserved.</strong></div></div><div class="footerContact_lPaK"><p>555 S. Independence Blvd, Virginia Beach, VA 23452</p><div class="contactLinks_EKti"><a href="tel:+18777289664">877-7-BUY-OMI</a><a href="mailto:sales@openmetal.io">sales@openmetal.io</a><a href="https://openmetal.io/schedule-meeting/">Schedule a Demo</a></div><p><strong>OpenMetal Central:</strong> <a target="_blank" href="https://central.openmetal.io/auth/sign-in">Login</a> or <a target="_blank" href="https://central.openmetal.io/sign-up">Create New Account</a></p></div></div></footer></div>
<script src="/openmetal-docs/assets/js/runtime~main.7dbb6dff.js"></script>
<script src="/openmetal-docs/assets/js/main.3b3d27ad.js"></script>
</body>
</html>