"use strict";(self.webpackChunkopenmetal_docs=self.webpackChunkopenmetal_docs||[]).push([[6059],{3905:function(e,n,t){t.d(n,{Zo:function(){return u},kt:function(){return k}});var a=t(7294);function l(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){l(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,a,l=function(e,n){if(null==e)return{};var t,a,l={},r=Object.keys(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||(l[t]=e[t]);return l}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(l[t]=e[t])}return l}var s=a.createContext({}),c=function(e){var n=a.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},u=function(e){var n=c(e.components);return a.createElement(s.Provider,{value:n},e.children)},p={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},d=a.forwardRef((function(e,n){var t=e.components,l=e.mdxType,r=e.originalType,s=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),d=c(t),k=l,b=d["".concat(s,".").concat(k)]||d[k]||p[k]||r;return t?a.createElement(b,o(o({ref:n},u),{},{components:t})):a.createElement(b,o({ref:n},u))}));function k(e,n){var t=arguments,l=n&&n.mdxType;if("string"==typeof e||l){var r=t.length,o=new Array(r);o[0]=d;var i={};for(var s in n)hasOwnProperty.call(n,s)&&(i[s]=n[s]);i.originalType=e,i.mdxType="string"==typeof e?e:l,o[1]=i;for(var c=2;c<r;c++)o[c]=t[c];return a.createElement.apply(null,o)}return a.createElement.apply(null,t)}d.displayName="MDXCreateElement"},1086:function(e,n,t){t.r(n),t.d(n,{frontMatter:function(){return i},contentTitle:function(){return s},metadata:function(){return c},toc:function(){return u},default:function(){return d}});var a=t(7462),l=t(3366),r=(t(7294),t(3905)),o=["components"],i={},s="How to Enable Elasticsearch and Kibana using Kolla Ansible",c={unversionedId:"operators-manual/day-4/kolla-ansible/enable-elk",id:"operators-manual/day-4/kolla-ansible/enable-elk",title:"How to Enable Elasticsearch and Kibana using Kolla Ansible",description:"Introduction",source:"@site/docs/operators-manual/day-4/kolla-ansible/enable-elk.md",sourceDirName:"operators-manual/day-4/kolla-ansible",slug:"/operators-manual/day-4/kolla-ansible/enable-elk",permalink:"/docs/manuals/operators-manual/day-4/kolla-ansible/enable-elk",editUrl:"https://github.com/openmetalio/openmetal-docs/blob/main/docs/operators-manual/day-4/kolla-ansible/enable-elk.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"How to Prepare and Use Kolla Ansible",permalink:"/docs/manuals/operators-manual/day-4/kolla-ansible/"},next:{title:"How to Enable TLS for OpenStack using Kolla Ansible",permalink:"/docs/manuals/operators-manual/day-4/kolla-ansible/enable-tls"}},u=[{value:"Introduction",id:"introduction",children:[],level:2},{value:"Prerequisites",id:"prerequisites",children:[{value:"Prepare Kolla Ansible",id:"prepare-kolla-ansible",children:[],level:3},{value:"Root Access to OpenStack Control Plane",id:"root-access-to-openstack-control-plane",children:[],level:3}],level:2},{value:"How to Enable Central Logging",id:"how-to-enable-central-logging",children:[{value:"Prevent Root Disk from Filling",id:"prevent-root-disk-from-filling",children:[],level:3}],level:2},{value:"Reference",id:"reference",children:[],level:2}],p={toc:u};function d(e){var n=e.components,t=(0,l.Z)(e,o);return(0,r.kt)("wrapper",(0,a.Z)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"how-to-enable-elasticsearch-and-kibana-using-kolla-ansible"},"How to Enable Elasticsearch and Kibana using Kolla Ansible"),(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"An OpenStack cloud generates a large quantity of log messages. By\ndefault, there's no way to visually see a Private Cloud's log messages.\nTo diagnose issues in logs requires using SSH and ",(0,r.kt)("inlineCode",{parentName:"p"},"grep"),", which can be\ncumbersome due to the number of hosts and number of OpenStack services.\nElasticsearch and Kibana (ELK) could be leveraged to see all of your\ncloud's log files from a single location in your browser. This feature\nset is not enabled by default. In this guide we walk you through how to\nenable the ELK stack for your Private Cloud using Kolla Ansible."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"enable-elk#prerequisites"},"Prerequisites")),(0,r.kt)("ol",{parentName:"li"},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("a",{parentName:"li",href:"enable-elk#prepare-kolla-ansible"},"Prepare Kolla\nAnsible")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("a",{parentName:"li",href:"enable-elk#root-access-to-openstack-control-plane"},"Root Access to OpenStack Control\nPlane")))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"enable-elk#how-to-enable-central-logging"},"How to Enable Central\nLogging")),(0,r.kt)("ol",{parentName:"li"},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("a",{parentName:"li",href:"enable-elk#prevent-root-disk-from-filling"},"Prevent Root Disk from\nFilling")))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"enable-elk#reference"},"Reference")))),(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("h3",{id:"prepare-kolla-ansible"},"Prepare Kolla Ansible"),(0,r.kt)("p",null,"This guide explains how to configure your cloud using Kolla Ansible. Any\ntime you work with Kolla Ansible, you must prepare a shell environment.\nFor more, see ",(0,r.kt)("a",{parentName:"p",href:"./"},"How to Prepare and Use Kolla\nAnsible"),"."),(0,r.kt)("p",null,"All commands are to be executed from the control plane node in which\nKolla Ansible has been prepared."),(0,r.kt)("h3",{id:"root-access-to-openstack-control-plane"},"Root Access to OpenStack Control Plane"),(0,r.kt)("p",null,"Root access to your cloud's control plane nodes is required."),(0,r.kt)("h2",{id:"how-to-enable-central-logging"},"How to Enable Central Logging"),(0,r.kt)("p",null,"To enable the ELK stack, in ",(0,r.kt)("inlineCode",{parentName:"p"},"/etc/kolla/globals.yml")," ensure the\nfollowing is set:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"enable_central_logging: 'yes'\n")),(0,r.kt)("p",null,"To enforce data retention policies, enable Elasticseach Curator with:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"enable_elasticsearch_curator: 'yes'\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Note","!")," -- Enabling Elasticseach Curator can help prevent your\ncloud's local disks from filling up by enforcing retention policies for\nElasticsearch data."),(0,r.kt)("p",null,"Kolla Ansible generates a default configuration for Elasticsearch\nCurator which can later be found in the ",(0,r.kt)("inlineCode",{parentName:"p"},"elasticsearch_curator")," Docker\ncontainer as\n",(0,r.kt)("inlineCode",{parentName:"p"},"elasticsearch_curator:/etc/elasticsearch-curator/actions.yml"),"."),(0,r.kt)("p",null,"Next, to deploy the configuration changes, use:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"# kolla-ansible -i /etc/fm-deploy/kolla-ansible-inventory reconfigure\n")),(0,r.kt)("h3",{id:"prevent-root-disk-from-filling"},"Prevent Root Disk from Filling"),(0,r.kt)("p",null,"You can enable Elasticsearch Curator to enforce disk retention polices\nto prevent your cloud's disks from filling up."),(0,r.kt)("h2",{id:"reference"},"Reference"),(0,r.kt)("p",null,"Kolla Ansible's ",(0,r.kt)("a",{parentName:"p",href:"https://docs.openstack.org/kolla-ansible/victoria/reference/logging-and-monitoring/central-logging-guide.html"},"Central\nLogging"),"\nguide."))}d.isMDXComponent=!0}}]);